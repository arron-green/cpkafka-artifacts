#!/usr/bin/env bash
set -x
source $SDKMAN_DIR/bin/sdkman-init.sh

cd "$HOME" && (curl -L https://github.com/confluentinc/ksql/archive/${PKG_CONFLUENT_VER}.tar.gz | tar -zx)

cd "$HOME/ksql-${PKG_CONFLUENT_VER}"
mvn -Dmaven.test.skip=$MAVEN_SKIP_TESTS clean package install
find .
# package ksql
cd ksql-package/target
tar -czvf $HOME/ksql-package-${PKG_CONFLUENT_VER}.tgz \
    ksql-*
